# Input: Query node q, maximum time budget b
# Output: List S of reachable listings within time b

S = []
for hub in L_up(q):
    for listing in L_down(hub):
        distance = t(q, hub) + t(hub, listing)
        if distance <= b:
            if listing not in S or distance < S[listing]:
                S.append((listing, distance))
        else:
            break
